# β΅ OpenSeal 5λ¶„ ν€µμ¤νƒ€νΈ: λ‚΄ API λ³΄νΈν•κΈ°

μ΄ κ°€μ΄λ“λ” OpenSealμ„ μ‚¬μ©ν•μ—¬ μμ‹ μ API μ„λΉ„μ¤λ¥Ό λ³΄νΈν•κ³ , μ½”λ“ λ³€μ΅° μ‹ μ΄λ¥Ό μ–΄λ–»κ² μ¦‰μ‹ κ°μ§€ν•  μ μλ”μ§€ μ‹¤μµν•λ” κ³Όμ •μ„ λ‹΄κ³  μμµλ‹λ‹¤.

---

## π€ λ‹¨κ³„λ³„ νν† λ¦¬μ–Ό

### 0λ‹¨κ³„: OpenSeal CLI μ„¤μΉ
OpenSeal λ…λ Ήμ–΄λ¥Ό μ–΄λ””μ„λ‚ μ‚¬μ©ν•λ ¤λ©΄ λ¨Όμ € CLIλ¥Ό λΉλ“ν•μ—¬ μ‹μ¤ν… κ²½λ΅μ— λ“±λ΅ν•΄μ•Ό ν•©λ‹λ‹¤.

```bash
# OpenSeal λ ν¬μ§€ν† λ¦¬ ν΄λ΅  (λλ” μ΄λ―Έ μλ‹¤λ©΄ ν•΄λ‹Ή λ””λ ‰ν† λ¦¬λ΅ μ΄λ™)
git clone https://github.com/highstation/openseal
cd openseal

# CLI λΉλ“ λ° μ„¤μΉ (ν”„λ΅μ νΈ λ£¨νΈμ—μ„ μ‹¤ν–‰)
cargo install --path ./crates/openseal-cli

# μ„¤μΉ ν™•μΈ
openseal --version
```

> [!NOTE]
> `cargo install`μ΄ μ™„λ£λλ©΄ `openseal` λ…λ Ήμ–΄λ¥Ό λ¨λ“  λ””λ ‰ν† λ¦¬μ—μ„ λ°”λ΅ μ‚¬μ©ν•  μ μμµλ‹λ‹¤. Rustμ `bin` κ²½λ΅(`~/.cargo/bin`)κ°€ PATHμ— λ“±λ΅λμ–΄ μμ–΄μ•Ό ν•©λ‹λ‹¤.

### 1λ‹¨κ³„: μƒν” ν”„λ΅μ νΈ μ¤€λΉ„
ν…μ¤νΈλ¥Ό μ„ν•΄ **λ¬Έμ¥μ„ΈνƒκΈ° (Sentence Laundry)** API ν”„λ΅μ νΈλ¥Ό μ¤€λΉ„ν•©λ‹λ‹¤.

```bash
# μƒν” λ ν¬μ§€ν† λ¦¬ ν΄λ΅  λ° μ΄λ™
git clone https://github.com/highstation/sentence-laundry
cd sentence-laundry

# κ°€μƒ ν™κ²½ ν™μ„±ν™” (Python ν”„λ΅μ νΈ κ¶μ¥ μ‚¬ν•­)
# ν™κ²½μ— λ”°λΌ python λλ” python3λ¥Ό μ‚¬μ©ν•μ„Έμ”.
python3 -m venv venv
source venv/bin/activate

# μμ΅΄μ„± μ„¤μΉ
pip install -r requirements.txt
```

> [!TIP]
> **μ™ κ°€μƒ ν™κ²½(venv)μ„ ν™μ„±ν™”ν•λ‚μ”?**  
> μ‹μ¤ν… ν™κ²½κ³Ό λ¶„λ¦¬ν•μ—¬ μμ΅΄μ„± μ¶©λμ„ λ°©μ§€ν•κΈ° μ„ν•¨μ…λ‹λ‹¤. OpenSealμ€ `.opensealignore` κ·μΉ™μ„ ν†µν•΄ κ°€μƒ ν™κ²½ ν΄λ”(`venv/`)λ¥Ό λ¬΄κ²°μ„± κ²€μ‚¬μ—μ„ μλ™μΌλ΅ μ μ™Έν•λ―€λ΅, μμ μ†μ¤μ½”λ“μ μ •μ²΄μ„±(A-hash)λ§ μ •ν™•ν μ¶”μ¶ν•  μ μμµλ‹λ‹¤.

### 2λ‹¨κ³„: ν”„λ΅μ νΈ λ΄‰μΈ (Sealing)
`openseal build` λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•μ—¬ μ „μ²΄ μ†μ¤μ½”λ“λ¥Ό λ¨Έν΄ νΈλ¦¬λ΅ λ΄‰μΈν•κ³  μ‹¤ν–‰ νμΌμ„ μ¤€λΉ„ν•©λ‹λ‹¤.

```bash
# OpenSealλ΅ λΉλ“ (μ†μ¤μ½”λ“ λ¬΄κ²°μ„± μ§€λ¬Έ μ¶”μ¶ λ° ν¨ν‚¤μ§•)
openseal build --source . --output ./dist --exec "python3 main.py"
```

**μ¶λ ¥ κ²°κ³Ό μμ‹:**
> β… **Root A-Hash**: `19bf5835...` (μ΄ κ°’μ΄ ν”„λ΅μ νΈμ μ μΌν• μ •μ²΄μ„±μ…λ‹λ‹¤)  
> π“¥ Copied files to build directory.

### 3λ‹¨κ³„: OpenSeal λ°νƒ€μ„μΌλ΅ μ„λ²„ μ‹¤ν–‰
μ΄μ  μ„λΉ„μ¤λ¥Ό OpenSeal λ³΄νΈλ§‰ μ•μ—μ„ μ‹¤ν–‰ν•©λ‹λ‹¤. λ°νƒ€μ„μ€ μμ‹ ν”„λ΅μ„Έμ¤λ΅ APIλ¥Ό μ‹¤ν–‰ν•λ©° λ¨λ“  μ…μ¶λ ¥μ„ κ°€λ΅μ±„ μ„λ…μ„ κ²°ν•©ν•©λ‹λ‹¤.

```bash
# 7325 ν¬νΈλ΅ OpenSeal λ°νƒ€μ„ μ‹¤ν–‰
openseal run --app ./dist --port 7325
```

### 4λ‹¨κ³„: μ •μƒ μƒνƒ ν™•μΈ
APIλ¥Ό νΈμ¶ν•μ—¬ μ‘λ‹µκ³Ό ν•¨κ» μ¤λ” **μ™μ¤(Wax)** μ‹κ·Έλ‹μ²λ¥Ό ν™•μΈν•©λ‹λ‹¤.

```bash
curl -X POST http://127.0.0.1:7325/wash \
  -H "Content-Type: application/json" \
  -H "X-OpenSeal-Wax: my-secret-session-123" \
  -d '{"text": "μ¤λ λ‚ μ”¨κ°€ μ •λ§ μΆ‹λ„¤μ”."}'
```

**κ²°κ³Ό ν™•μΈ**: μ‘λ‹µ ν—¤λ” λλ” JSONμ— ν¬ν•¨λ μ„λ…(`openseal_signature`)μ„ λ©”λ¨ν•΄ λ‘μ„Έμ”. μ΄κ²ƒμ΄ λ°”λ΅ **κ³¨λ“  νΈλ£¨μ¤(Golden Truth)**μ…λ‹λ‹¤. β…

### 5λ‹¨κ³„: λ³€μ΅° μ‹¤μ¦ (Tampering Attack)
μ΄μ  μ†μ¤μ½”λ“λ¥Ό κ³ μλ΅ μμ •ν•μ—¬ OpenSealμ΄ μ΄λ¥Ό μ–΄λ–»κ² κ°μ§€ν•λ”μ§€ ν™•μΈν•©λ‹λ‹¤.

1. `translator.py` νμΌμ„ μ—΄μ–΄ λ²μ—­ λ΅μ§μ΄λ‚ ν…μ¤νΈ μ²λ¦¬ λ°©μ‹μ„ μ‚΄μ§ μμ •ν•©λ‹λ‹¤. (μ: νΉμ • λ‹¨μ–΄ μ¶”κ°€)
2. λ‹¤μ‹ λΉλ“ν•κ³  μ‹¤ν–‰ν•©λ‹λ‹¤:
   ```bash
   openseal build --source . --output ./dist --exec "python3 main.py"
   openseal run --app ./dist --port 7325
   ```
3. 4λ‹¨κ³„μ™€ **λ™μΌν•** `curl` λ…λ Ήμ–΄λ¥Ό λ‹¤μ‹ μ‹¤ν–‰ν•©λ‹λ‹¤.

**κ²°κ³Ό ν™•μΈ**: μ†μ¤μ½”λ“κ°€ λ‹¨ 1λ°”μ΄νΈλΌλ„ λ³€μ΅°λμ—λ‹¤λ©΄, μ‘λ‹µμ `signature` κ°’μ΄ μ΄μ „κ³Ό **μ™„μ „ν λ‹¬λΌμ΅μ„ κ²ƒμ…λ‹λ‹¤.** β  
μ΄λ” OpenSealμ΄ μ‹¤ν–‰λλ” μ½”λ“μ μ •μ²΄μ„±μ΄ λ°”λ€μ—μμ„ μ•”νΈν•™μ μΌλ΅ μ¦λ…ν• κ²ƒμ…λ‹λ‹¤.

---

## π›΅οΈ μ μ™Έ κ·μΉ™ ν™μ©ν•κΈ°

νμ΄μ¬ ν”„λ΅μ νΈμ `venv/`λ‚ `__pycache__/`λ” λ¬΄κ²°μ„± κ²€μ‚¬μ—μ„ μ μ™Έλμ–΄μ•Ό ν•©λ‹λ‹¤. OpenSealμ€ μλ™μΌλ΅ `.gitignore`λ¥Ό μ΅΄μ¤‘ν•λ©°, μ¶”κ°€λ΅ `.opensealignore`λ¥Ό ν†µν•΄ μ μ™Έ κ·μΉ™μ„ μ„¤μ •ν•  μ μμµλ‹λ‹¤.

- **μ „μ²΄ μ μ™Έ**: `.opensealignore`μ— `venv/` μ¶”κ°€ (νμΌ μ΅΄μ¬ μμ²΄λ¥Ό λ¬΄μ‹)
- **λ‚΄μ©λ§ μ μ™Έ(κ°€λ³€ νμΌ)**: `.openseal_mutable`μ— `*.log` μ¶”κ°€ (νμΌ μ΅΄μ¬λ” ν™•μΈν•λ λ‚΄μ©μ€ λ¬΄μ‹)

---

## π›΅οΈ ν•µμ‹¬ μ •μ±…: Golden Truth
OpenSealμ€ μ‹¤μ  ν”„λ΅λ•μ…μ—μ„λ„ λ™μΌν• μ›μΉ™μ„ μ μ©ν•©λ‹λ‹¤.

- **μ€λ‹‰**: μ„λ²„ λ΅μ§, ν•΄μ‹ κµ¬μ΅° λ“±μ„ μ™Έλ¶€μ— λ…Έμ¶ν•μ§€ μ•μµλ‹λ‹¤.
- **μ¦λ…**: μ¤μ§ νΉμ • μƒν™©(`Wax` + `Input`)μ— λ€ν• **μ •λ‹µ μ„λ…(Golden Truth)**λ§ κ²€μ¦μμ—κ² κ³µμ ν•©λ‹λ‹¤.
- **κ²€μ¦**: κ²€μ¦μλ” μ‘λ‹µμΌλ΅ μ¨ μ„λ…μ΄ κ³µμ λ°›μ€ κ³¨λ“  νΈλ£¨μ¤μ™€ μΌμΉν•λ”μ§€λ§ λ€μ΅°ν•λ©΄ λ©λ‹λ‹¤.

---

## π’΅ λ‹¤μ λ‹¨κ³„
- [ν”„λ΅μ νΈ μ•„ν‚¤ν…μ² κ°μ” (ARCHITECTURE_KR.md)](./ARCHITECTURE_KR.md)
- [κ³µκ° κΈ°μ  λ…μ„Έ (SPEC_PUBLIC_KR.md)](./SPEC_PUBLIC_KR.md)
